error: this expression creates a reference which is immediately dereferenced by the compiler
  --> tests/ui/needless_borrow.rs:15:15
   |
LL |     let _ = x(&&a); // warn
   |               ^^^
   |
   = note: `-D clippy::needless-borrow` implied by `-D warnings`
   = help: to override `-D warnings` add `#[allow(clippy::needless_borrow)]`
help: change this to
   |
LL |     let _ = x(&a); // warn
   |               ~~

error: this expression creates a reference which is immediately dereferenced by the compiler
  --> tests/ui/needless_borrow.rs:19:13
   |
LL |     mut_ref(&mut &mut b); // warn
   |             ^^^^^^^^^^^
   |
help: change this to
   |
LL |     mut_ref(&mut b); // warn
   |             ~~~~~~

error: this expression creates a reference which is immediately dereferenced by the compiler
  --> tests/ui/needless_borrow.rs:31:13
   |
LL |             &&a
   |             ^^^
   |
help: change this to
   |
LL |             &a
   |

error: this expression creates a reference which is immediately dereferenced by the compiler
  --> tests/ui/needless_borrow.rs:33:15
   |
LL |         46 => &&a,
   |               ^^^
   |
help: change this to
   |
LL |         46 => &a,
   |               ~~

error: this expression creates a reference which is immediately dereferenced by the compiler
  --> tests/ui/needless_borrow.rs:39:27
   |
LL |                     break &ref_a;
   |                           ^^^^^^
   |
help: change this to
   |
LL |                     break ref_a;
   |                           ~~~~~

error: this expression creates a reference which is immediately dereferenced by the compiler
  --> tests/ui/needless_borrow.rs:46:15
   |
LL |     let _ = x(&&&a);
   |               ^^^^
   |
help: change this to
   |
LL |     let _ = x(&a);
   |               ~~

error: this expression creates a reference which is immediately dereferenced by the compiler
  --> tests/ui/needless_borrow.rs:47:15
   |
LL |     let _ = x(&mut &&a);
   |               ^^^^^^^^
   |
help: change this to
   |
LL |     let _ = x(&a);
   |               ~~

error: this expression creates a reference which is immediately dereferenced by the compiler
  --> tests/ui/needless_borrow.rs:48:15
   |
LL |     let _ = x(&&&mut b);
   |               ^^^^^^^^
   |
help: change this to
   |
LL |     let _ = x(&mut b);
   |               ~~~~~~

error: this expression creates a reference which is immediately dereferenced by the compiler
  --> tests/ui/needless_borrow.rs:49:15
   |
LL |     let _ = x(&&ref_a);
   |               ^^^^^^^
   |
help: change this to
   |
LL |     let _ = x(ref_a);
   |               ~~~~~

error: this expression creates a reference which is immediately dereferenced by the compiler
  --> tests/ui/needless_borrow.rs:52:11
   |
LL |         x(&b);
   |           ^^
   |
help: change this to
   |
LL |         x(b);
   |           ~

error: this expression creates a reference which is immediately dereferenced by the compiler
  --> tests/ui/needless_borrow.rs:59:13
   |
LL |     mut_ref(&mut x);
   |             ^^^^^^
   |
help: change this to
   |
LL |     mut_ref(x);
   |             ~

error: this expression creates a reference which is immediately dereferenced by the compiler
  --> tests/ui/needless_borrow.rs:60:13
   |
LL |     mut_ref(&mut &mut x);
   |             ^^^^^^^^^^^
   |
help: change this to
   |
LL |     mut_ref(x);
   |             ~

error: this expression creates a reference which is immediately dereferenced by the compiler
  --> tests/ui/needless_borrow.rs:61:23
   |
LL |     let y: &mut i32 = &mut x;
   |                       ^^^^^^
   |
help: change this to
   |
LL |     let y: &mut i32 = x;
   |                       ~

error: this expression creates a reference which is immediately dereferenced by the compiler
  --> tests/ui/needless_borrow.rs:62:23
   |
LL |     let y: &mut i32 = &mut &mut x;
   |                       ^^^^^^^^^^^
   |
help: change this to
   |
LL |     let y: &mut i32 = x;
   |                       ~

error: this expression creates a reference which is immediately dereferenced by the compiler
  --> tests/ui/needless_borrow.rs:71:14
   |
LL |         0 => &mut x,
   |              ^^^^^^
   |
help: change this to
   |
LL |         0 => x,
   |              ~

error: this expression creates a reference which is immediately dereferenced by the compiler
  --> tests/ui/needless_borrow.rs:77:14
   |
LL |         0 => &mut x,
   |              ^^^^^^
   |
help: change this to
   |
LL |         0 => x,
   |              ~

error: this expression borrows a value the compiler would automatically borrow
  --> tests/ui/needless_borrow.rs:89:13
   |
LL |     let _ = (&x).0;
   |             ^^^^
   |
help: change this to
   |
LL |     let _ = x.0;
   |             ~

error: this expression borrows a value the compiler would automatically borrow
  --> tests/ui/needless_borrow.rs:91:22
   |
LL |     let _ = unsafe { (&*x).0 };
   |                      ^^^^^
   |
help: change this to
   |
LL |     let _ = unsafe { (*x).0 };
   |                      ~~~~

error: this expression creates a reference which is immediately dereferenced by the compiler
  --> tests/ui/needless_borrow.rs:101:5
   |
LL |     (&&()).foo();
   |     ^^^^^^
   |
help: change this to
   |
LL |     (&()).foo();
   |     ~~~~~

error: this expression creates a reference which is immediately dereferenced by the compiler
  --> tests/ui/needless_borrow.rs:110:5
   |
LL |     (&&5).foo();
   |     ^^^^^
   |
help: change this to
   |
LL |     (&5).foo();
   |     ~~~~

error: this expression creates a reference which is immediately dereferenced by the compiler
  --> tests/ui/needless_borrow.rs:136:23
   |
LL |     let x: (&str,) = (&"",);
   |                       ^^^
   |
help: change this to
   |
LL |     let x: (&str,) = ("",);
   |                       ~~

error: this expression borrows a value the compiler would automatically borrow
  --> tests/ui/needless_borrow.rs:178:13
   |
LL |             (&self.f)()
   |             ^^^^^^^^^
   |
help: change this to
   |
LL |             (self.f)()
   |             ~~~~~~~~

error: this expression borrows a value the compiler would automatically borrow
  --> tests/ui/needless_borrow.rs:187:13
   |
LL |             (&mut self.f)()
   |             ^^^^^^^^^^^^^
   |
help: change this to
   |
LL |             (self.f)()
   |             ~~~~~~~~

error: this expression borrows a value the compiler would automatically borrow
  --> tests/ui/needless_borrow.rs:224:22
   |
LL |         let _ = &mut (&mut { x.u }).x;
   |                      ^^^^^^^^^^^^^^
   |
help: change this to
   |
LL |         let _ = &mut { x.u }.x;
   |                      ~~~~~~~

error: this expression borrows a value the compiler would automatically borrow
  --> tests/ui/needless_borrow.rs:231:22
   |
LL |         let _ = &mut (&mut { x.u }).x;
   |                      ^^^^^^^^^^^^^^
   |
help: change this to
   |
LL |         let _ = &mut { x.u }.x;
   |                      ~~~~~~~

error: this expression borrows a value the compiler would automatically borrow
  --> tests/ui/needless_borrow.rs:235:22
   |
LL |         let _ = &mut (&mut x.u).x;
   |                      ^^^^^^^^^^
   |
help: change this to
   |
LL |         let _ = &mut x.u.x;
   |                      ~~~

error: this expression borrows a value the compiler would automatically borrow
  --> tests/ui/needless_borrow.rs:236:22
   |
LL |         let _ = &mut (&mut { x.u }).x;
   |                      ^^^^^^^^^^^^^^
   |
help: change this to
   |
LL |         let _ = &mut { x.u }.x;
   |                      ~~~~~~~

error: this expression creates a reference which is immediately dereferenced by the compiler
  --> tests/ui/needless_borrow.rs:257:23
   |
LL |     option.unwrap_or((&x.0,));
   |                       ^^^^
   |
help: change this to
   |
LL |     option.unwrap_or((x.0,));
   |                       ~~~

error: aborting due to 28 previous errors

